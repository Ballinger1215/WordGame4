package wordgame3;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

/**
 *
 * @author Mark
 */
public class Data {

    String[][] _userInfo;
    String[][] _userInfoG;
    //int numberofRecords = _userInfo.size();

    public Data() throws FileNotFoundException {
        getInfoFromFile();
        
    }

    private void getInfoFromFile() throws FileNotFoundException {
        //read in your userInfo file
        //Scanner scan = new Scanner(System.in);
        ArrayList<String> _userInfo = new ArrayList<>();
        File myFile = new File("userInfo.rtf");
        Scanner inputFile = new Scanner(myFile);
        //load all your data from text file
        while (inputFile.hasNext()) {
            
            _userInfo.add(inputFile.nextLine());

        }   
        inputFile.close();
        
        int numberofRecords = _userInfo.size();
        
        //String[][] dBase = new String[100][];
        _userInfoG = new String[100][];

        for (int i = 0; i < numberofRecords; i++) {
            
            System.out.println(_userInfo.get(i));
            //dBase[i] = userInfo.get(i).split(" ");
            _userInfoG[i] = _userInfo.get(i).split(" ");
            
        }
    }

    private void setInfoToFile() {
        //write inserInfo into the file
    }

    public String userController() {
        
        Scanner scan = new Scanner(System.in);
        int numberOfRecords = _userInfo.size();
        /* 
        userController method will ask for user name 
        
        if it doesnâ€™t exist 
        in your usersInfo Array 
        it will ask for a password to create a new user, 
        
        else it will ask for your previously saved password to let 
        you play the game with that username. 
        
        If password was correct it 
        will return the username to gameController. 
         */
        int flag = -1;
        
        do {
            
            System.out.println("Enter a username:");
            String userName = new String(scan.nextLine());
            
            for (int i = 0; i < numberOfRecords; i++) {
                
                if (_userInfoG[i][0].equalsIgnoreCase(userName)) {
                    
                    flag = i;
                    
                }
            }
            if (flag == -1) {
                
                System.out.println("Enter a password:");
                String password = scan.nextLine();
                
                _userInfoG[numberOfRecords] = new String[3];
                _userInfoG[numberOfRecords][0] = userName;
                _userInfoG[numberOfRecords][1] = password;
                _userInfoG[numberOfRecords][2] = "0";
                
                flag = numberOfRecords;
                numberOfRecords++;
                
            } else {
                
                System.out.println("Enter a password:");
                String password = new String(scan.nextLine());
                
                if (password.equals(_userInfoG[flag][1])) {
                    
                    System.out.println("Correct");
                    

                } else {
                    
                    System.out.println("False");
                    
                }
            }

        } while (flag == -1);

        return new String("");
    }

    public void setScores(String[] winner) {
        //replace new high score with old one
        setInfoToFile();

    }

    public String[][] getScores() {

        //remove the password colomn from userInfo and return the names and the scores
        return new String[1][];

    }
}
