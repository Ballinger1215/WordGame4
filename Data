package wordgame3;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

/**
 *
 * @author Mark
 */
public class Data {

    String[][] _userInfoG;
    int numberOfRecords;

    public Data() throws FileNotFoundException {
        getInfoFromFile();
        setInfoToFile();
    }

    private void getInfoFromFile() throws FileNotFoundException {
        //read in your userInfo file
        ArrayList<String> _userInfo = new ArrayList<>();
        File myFile = new File("userInfo.txt");
        Scanner inputFile = new Scanner(myFile);
        
        //load all your data from text file
        while (inputFile.hasNext()) {
            
            _userInfo.add(inputFile.nextLine());

        }   
        inputFile.close();
        
        numberOfRecords = _userInfo.size();
        
        //String[][] dBase = new String[100][]; // logic from the basic read and write to database game to create an array of usersInfo
        _userInfoG = new String[100][];
        
        //put the userinfo into a gloabl array
        for (int i = 0; i < numberOfRecords; i++) {
            
            System.out.println(_userInfo.get(i));
            //dBase[i] = userInfo.get(i).split(" "); // logic from the basic read and write to database game to create users with passwords in database
            _userInfoG[i] = _userInfo.get(i).split(" ");
            
        }
    }

    private void setInfoToFile() {
        //write inserInfo into the file
        
        
        //        String filename = "userInfo.txt";
        //        FileWriter fw = new FileWriter(filename, true);
        //        PrintWriter outputfile = new PrintWriter(fw);
    }

    public String userController() {
        
        Scanner scan = new Scanner(System.in);
        int flag = -1;
        
        do {
            
            System.out.println("Enter a username:"); //userController method will ask for user name 
            String userName = new String(scan.nextLine());
            
            for (int i = 0; i < numberOfRecords; i++) {
                
                if (_userInfoG[i][0].equalsIgnoreCase(userName)) {
                    
                    flag = i; //you play the game with that username.
                    
                }
            }
            if (flag == -1) {  //if it doesnâ€™t exist in your usersInfo Array 
                
                System.out.println("Enter a password:"); //it will ask for a password to create a new user, 
                String password = scan.nextLine();
                
                _userInfoG[numberOfRecords] = new String[3];
                _userInfoG[numberOfRecords][0] = userName;
                _userInfoG[numberOfRecords][1] = password;
                _userInfoG[numberOfRecords][2] = "0";
                
                flag = numberOfRecords;
                numberOfRecords++;
                
            } else { //else it will ask for your previously saved password to let
                
                System.out.println("Enter a password:");
                String password = new String(scan.nextLine());
                
                if (password.equals(_userInfoG[flag][1])) { //If password was correct it
                    
                    System.out.println("Correct");
                    
                } else {
                    
                    System.out.println("False");
                    
                }
            }

        } while (flag == -1);

        return new String(_userInfoG[i][0]); //will return the username to gameController.
    }

    public void setScores(String[] winner) {
        //replace new high score with old one
        setInfoToFile();

    }

    public String[][] getScores() {

        //remove the password colomn from userInfo and return the names and the scores
        return new String[1][];

    }
}

